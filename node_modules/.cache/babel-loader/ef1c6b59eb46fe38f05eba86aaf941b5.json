{"ast":null,"code":"/*!\n * lightgallery | 2.3.0 | October 28th 2021\n * http://www.lightgalleryjs.com/\n * Copyright (c) 2020 Sachin Neravath;\n * @license GPLv3\n */\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar thumbnailsSettings = {\n  thumbnail: true,\n  animateThumb: true,\n  currentPagerPosition: 'middle',\n  alignThumbnails: 'middle',\n  thumbWidth: 100,\n  thumbHeight: '80px',\n  thumbMargin: 5,\n  appendThumbnailsTo: '.lg-components',\n  toggleThumb: false,\n  enableThumbDrag: true,\n  enableThumbSwipe: true,\n  thumbnailSwipeThreshold: 10,\n  loadYouTubeThumbnail: true,\n  youTubeThumbSize: 1\n};\n/**\r\n * List of lightGallery events\r\n * All events should be documented here\r\n * Below interfaces are used to build the website documentations\r\n * */\n\nvar lGEvents = {\n  afterAppendSlide: 'lgAfterAppendSlide',\n  init: 'lgInit',\n  hasVideo: 'lgHasVideo',\n  containerResize: 'lgContainerResize',\n  updateSlides: 'lgUpdateSlides',\n  afterAppendSubHtml: 'lgAfterAppendSubHtml',\n  beforeOpen: 'lgBeforeOpen',\n  afterOpen: 'lgAfterOpen',\n  slideItemLoad: 'lgSlideItemLoad',\n  beforeSlide: 'lgBeforeSlide',\n  afterSlide: 'lgAfterSlide',\n  posterClick: 'lgPosterClick',\n  dragStart: 'lgDragStart',\n  dragMove: 'lgDragMove',\n  dragEnd: 'lgDragEnd',\n  beforeNextSlide: 'lgBeforeNextSlide',\n  beforePrevSlide: 'lgBeforePrevSlide',\n  beforeClose: 'lgBeforeClose',\n  afterClose: 'lgAfterClose',\n  rotateLeft: 'lgRotateLeft',\n  rotateRight: 'lgRotateRight',\n  flipHorizontal: 'lgFlipHorizontal',\n  flipVertical: 'lgFlipVertical'\n};\n\nvar Thumbnail =\n/** @class */\nfunction () {\n  function Thumbnail(instance, $LG) {\n    this.thumbOuterWidth = 0;\n    this.thumbTotalWidth = 0;\n    this.translateX = 0;\n    this.thumbClickable = false; // get lightGallery core plugin instance\n\n    this.core = instance;\n    this.$LG = $LG;\n    return this;\n  }\n\n  Thumbnail.prototype.init = function () {\n    // extend module default settings with lightGallery core settings\n    this.settings = __assign(__assign({}, thumbnailsSettings), this.core.settings);\n    this.thumbOuterWidth = 0;\n    this.thumbTotalWidth = this.core.galleryItems.length * (this.settings.thumbWidth + this.settings.thumbMargin); // Thumbnail animation value\n\n    this.translateX = 0;\n    this.setAnimateThumbStyles();\n\n    if (!this.core.settings.allowMediaOverlap) {\n      this.settings.toggleThumb = false;\n    }\n\n    if (this.settings.thumbnail) {\n      this.build();\n\n      if (this.settings.animateThumb) {\n        if (this.settings.enableThumbDrag) {\n          this.enableThumbDrag();\n        }\n\n        if (this.settings.enableThumbSwipe) {\n          this.enableThumbSwipe();\n        }\n\n        this.thumbClickable = false;\n      } else {\n        this.thumbClickable = true;\n      }\n\n      this.toggleThumbBar();\n      this.thumbKeyPress();\n    }\n  };\n\n  Thumbnail.prototype.build = function () {\n    var _this = this;\n\n    this.setThumbMarkup();\n    this.manageActiveClassOnSlideChange();\n    this.$lgThumb.first().on('click.lg touchend.lg', function (e) {\n      var $target = _this.$LG(e.target);\n\n      if (!$target.hasAttribute('data-lg-item-id')) {\n        return;\n      }\n\n      setTimeout(function () {\n        // In IE9 and bellow touch does not support\n        // Go to slide if browser does not support css transitions\n        if (_this.thumbClickable && !_this.core.lgBusy) {\n          var index = parseInt($target.attr('data-lg-item-id'));\n\n          _this.core.slide(index, false, true, false);\n        }\n      }, 50);\n    });\n    this.core.LGel.on(lGEvents.beforeSlide + \".thumb\", function (event) {\n      var index = event.detail.index;\n\n      _this.animateThumb(index);\n    });\n    this.core.LGel.on(lGEvents.beforeOpen + \".thumb\", function () {\n      _this.thumbOuterWidth = _this.core.outer.get().offsetWidth;\n    });\n    this.core.LGel.on(lGEvents.updateSlides + \".thumb\", function () {\n      _this.rebuildThumbnails();\n    });\n    this.core.LGel.on(lGEvents.containerResize + \".thumb\", function () {\n      if (!_this.core.lgOpened) return;\n      setTimeout(function () {\n        _this.thumbOuterWidth = _this.core.outer.get().offsetWidth;\n\n        _this.animateThumb(_this.core.index);\n\n        _this.thumbOuterWidth = _this.core.outer.get().offsetWidth;\n      }, 50);\n    });\n  };\n\n  Thumbnail.prototype.setThumbMarkup = function () {\n    var thumbOuterClassNames = 'lg-thumb-outer ';\n\n    if (this.settings.alignThumbnails) {\n      thumbOuterClassNames += \"lg-thumb-align-\" + this.settings.alignThumbnails;\n    }\n\n    var html = \"<div class=\\\"\" + thumbOuterClassNames + \"\\\">\\n        <div class=\\\"lg-thumb lg-group\\\">\\n        </div>\\n        </div>\";\n    this.core.outer.addClass('lg-has-thumb');\n\n    if (this.settings.appendThumbnailsTo === '.lg-components') {\n      this.core.$lgComponents.append(html);\n    } else {\n      this.core.outer.append(html);\n    }\n\n    this.$thumbOuter = this.core.outer.find('.lg-thumb-outer').first();\n    this.$lgThumb = this.core.outer.find('.lg-thumb').first();\n\n    if (this.settings.animateThumb) {\n      this.core.outer.find('.lg-thumb').css('transition-duration', this.core.settings.speed + 'ms').css('width', this.thumbTotalWidth + 'px').css('position', 'relative');\n    }\n\n    this.setThumbItemHtml(this.core.galleryItems);\n  };\n\n  Thumbnail.prototype.enableThumbDrag = function () {\n    var _this = this;\n\n    var thumbDragUtils = {\n      cords: {\n        startX: 0,\n        endX: 0\n      },\n      isMoved: false,\n      newTranslateX: 0,\n      startTime: new Date(),\n      endTime: new Date(),\n      touchMoveTime: 0\n    };\n    var isDragging = false;\n    this.$thumbOuter.addClass('lg-grab');\n    this.core.outer.find('.lg-thumb').first().on('mousedown.lg.thumb', function (e) {\n      if (_this.thumbTotalWidth > _this.thumbOuterWidth) {\n        // execute only on .lg-object\n        e.preventDefault();\n        thumbDragUtils.cords.startX = e.pageX;\n        thumbDragUtils.startTime = new Date();\n        _this.thumbClickable = false;\n        isDragging = true; // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\n\n        _this.core.outer.get().scrollLeft += 1;\n        _this.core.outer.get().scrollLeft -= 1; // *\n\n        _this.$thumbOuter.removeClass('lg-grab').addClass('lg-grabbing');\n      }\n    });\n    this.$LG(window).on(\"mousemove.lg.thumb.global\" + this.core.lgId, function (e) {\n      if (!_this.core.lgOpened) return;\n\n      if (isDragging) {\n        thumbDragUtils.cords.endX = e.pageX;\n        thumbDragUtils = _this.onThumbTouchMove(thumbDragUtils);\n      }\n    });\n    this.$LG(window).on(\"mouseup.lg.thumb.global\" + this.core.lgId, function () {\n      if (!_this.core.lgOpened) return;\n\n      if (thumbDragUtils.isMoved) {\n        thumbDragUtils = _this.onThumbTouchEnd(thumbDragUtils);\n      } else {\n        _this.thumbClickable = true;\n      }\n\n      if (isDragging) {\n        isDragging = false;\n\n        _this.$thumbOuter.removeClass('lg-grabbing').addClass('lg-grab');\n      }\n    });\n  };\n\n  Thumbnail.prototype.enableThumbSwipe = function () {\n    var _this = this;\n\n    var thumbDragUtils = {\n      cords: {\n        startX: 0,\n        endX: 0\n      },\n      isMoved: false,\n      newTranslateX: 0,\n      startTime: new Date(),\n      endTime: new Date(),\n      touchMoveTime: 0\n    };\n    this.$lgThumb.on('touchstart.lg', function (e) {\n      if (_this.thumbTotalWidth > _this.thumbOuterWidth) {\n        e.preventDefault();\n        thumbDragUtils.cords.startX = e.targetTouches[0].pageX;\n        _this.thumbClickable = false;\n        thumbDragUtils.startTime = new Date();\n      }\n    });\n    this.$lgThumb.on('touchmove.lg', function (e) {\n      if (_this.thumbTotalWidth > _this.thumbOuterWidth) {\n        e.preventDefault();\n        thumbDragUtils.cords.endX = e.targetTouches[0].pageX;\n        thumbDragUtils = _this.onThumbTouchMove(thumbDragUtils);\n      }\n    });\n    this.$lgThumb.on('touchend.lg', function () {\n      if (thumbDragUtils.isMoved) {\n        thumbDragUtils = _this.onThumbTouchEnd(thumbDragUtils);\n      } else {\n        _this.thumbClickable = true;\n      }\n    });\n  }; // Rebuild thumbnails\n\n\n  Thumbnail.prototype.rebuildThumbnails = function () {\n    var _this = this; // Remove transitions\n\n\n    this.$thumbOuter.addClass('lg-rebuilding-thumbnails');\n    setTimeout(function () {\n      _this.thumbTotalWidth = _this.core.galleryItems.length * (_this.settings.thumbWidth + _this.settings.thumbMargin);\n\n      _this.$lgThumb.css('width', _this.thumbTotalWidth + 'px');\n\n      _this.$lgThumb.empty();\n\n      _this.setThumbItemHtml(_this.core.galleryItems);\n\n      _this.animateThumb(_this.core.index);\n    }, 50);\n    setTimeout(function () {\n      _this.$thumbOuter.removeClass('lg-rebuilding-thumbnails');\n    }, 200);\n  }; // @ts-check\n\n\n  Thumbnail.prototype.setTranslate = function (value) {\n    this.$lgThumb.css('transform', 'translate3d(-' + value + 'px, 0px, 0px)');\n  };\n\n  Thumbnail.prototype.getPossibleTransformX = function (left) {\n    if (left > this.thumbTotalWidth - this.thumbOuterWidth) {\n      left = this.thumbTotalWidth - this.thumbOuterWidth;\n    }\n\n    if (left < 0) {\n      left = 0;\n    }\n\n    return left;\n  };\n\n  Thumbnail.prototype.animateThumb = function (index) {\n    this.$lgThumb.css('transition-duration', this.core.settings.speed + 'ms');\n\n    if (this.settings.animateThumb) {\n      var position = 0;\n\n      switch (this.settings.currentPagerPosition) {\n        case 'left':\n          position = 0;\n          break;\n\n        case 'middle':\n          position = this.thumbOuterWidth / 2 - this.settings.thumbWidth / 2;\n          break;\n\n        case 'right':\n          position = this.thumbOuterWidth - this.settings.thumbWidth;\n      }\n\n      this.translateX = (this.settings.thumbWidth + this.settings.thumbMargin) * index - 1 - position;\n\n      if (this.translateX > this.thumbTotalWidth - this.thumbOuterWidth) {\n        this.translateX = this.thumbTotalWidth - this.thumbOuterWidth;\n      }\n\n      if (this.translateX < 0) {\n        this.translateX = 0;\n      }\n\n      this.setTranslate(this.translateX);\n    }\n  };\n\n  Thumbnail.prototype.onThumbTouchMove = function (thumbDragUtils) {\n    thumbDragUtils.newTranslateX = this.translateX;\n    thumbDragUtils.isMoved = true;\n    thumbDragUtils.touchMoveTime = new Date().valueOf();\n    thumbDragUtils.newTranslateX -= thumbDragUtils.cords.endX - thumbDragUtils.cords.startX;\n    thumbDragUtils.newTranslateX = this.getPossibleTransformX(thumbDragUtils.newTranslateX); // move current slide\n\n    this.setTranslate(thumbDragUtils.newTranslateX);\n    this.$thumbOuter.addClass('lg-dragging');\n    return thumbDragUtils;\n  };\n\n  Thumbnail.prototype.onThumbTouchEnd = function (thumbDragUtils) {\n    thumbDragUtils.isMoved = false;\n    thumbDragUtils.endTime = new Date();\n    this.$thumbOuter.removeClass('lg-dragging');\n    var touchDuration = thumbDragUtils.endTime.valueOf() - thumbDragUtils.startTime.valueOf();\n    var distanceXnew = thumbDragUtils.cords.endX - thumbDragUtils.cords.startX;\n    var speedX = Math.abs(distanceXnew) / touchDuration; // Some magical numbers\n    // Can be improved\n\n    if (speedX > 0.15 && thumbDragUtils.endTime.valueOf() - thumbDragUtils.touchMoveTime < 30) {\n      speedX += 1;\n\n      if (speedX > 2) {\n        speedX += 1;\n      }\n\n      speedX = speedX + speedX * (Math.abs(distanceXnew) / this.thumbOuterWidth);\n      this.$lgThumb.css('transition-duration', Math.min(speedX - 1, 2) + 'settings');\n      distanceXnew = distanceXnew * speedX;\n      this.translateX = this.getPossibleTransformX(this.translateX - distanceXnew);\n      this.setTranslate(this.translateX);\n    } else {\n      this.translateX = thumbDragUtils.newTranslateX;\n    }\n\n    if (Math.abs(thumbDragUtils.cords.endX - thumbDragUtils.cords.startX) < this.settings.thumbnailSwipeThreshold) {\n      this.thumbClickable = true;\n    }\n\n    return thumbDragUtils;\n  };\n\n  Thumbnail.prototype.getThumbHtml = function (thumb, index) {\n    var slideVideoInfo = this.core.galleryItems[index].__slideVideoInfo || {};\n    var thumbImg;\n\n    if (slideVideoInfo.youtube) {\n      if (this.settings.loadYouTubeThumbnail) {\n        thumbImg = '//img.youtube.com/vi/' + slideVideoInfo.youtube[1] + '/' + this.settings.youTubeThumbSize + '.jpg';\n      } else {\n        thumbImg = thumb;\n      }\n    } else {\n      thumbImg = thumb;\n    }\n\n    return \"<div data-lg-item-id=\\\"\" + index + \"\\\" class=\\\"lg-thumb-item \" + (index === this.core.index ? ' active' : '') + \"\\\" \\n        style=\\\"width:\" + this.settings.thumbWidth + \"px; height: \" + this.settings.thumbHeight + \";\\n            margin-right: \" + this.settings.thumbMargin + \"px;\\\">\\n            <img data-lg-item-id=\\\"\" + index + \"\\\" src=\\\"\" + thumbImg + \"\\\" />\\n        </div>\";\n  };\n\n  Thumbnail.prototype.getThumbItemHtml = function (items) {\n    var thumbList = '';\n\n    for (var i = 0; i < items.length; i++) {\n      thumbList += this.getThumbHtml(items[i].thumb, i);\n    }\n\n    return thumbList;\n  };\n\n  Thumbnail.prototype.setThumbItemHtml = function (items) {\n    var thumbList = this.getThumbItemHtml(items);\n    this.$lgThumb.html(thumbList);\n  };\n\n  Thumbnail.prototype.setAnimateThumbStyles = function () {\n    if (this.settings.animateThumb) {\n      this.core.outer.addClass('lg-animate-thumb');\n    }\n  }; // Manage thumbnail active calss\n\n\n  Thumbnail.prototype.manageActiveClassOnSlideChange = function () {\n    var _this = this; // manage active class for thumbnail\n\n\n    this.core.LGel.on(lGEvents.beforeSlide + \".thumb\", function (event) {\n      var $thumb = _this.core.outer.find('.lg-thumb-item');\n\n      var index = event.detail.index;\n      $thumb.removeClass('active');\n      $thumb.eq(index).addClass('active');\n    });\n  }; // Toggle thumbnail bar\n\n\n  Thumbnail.prototype.toggleThumbBar = function () {\n    var _this = this;\n\n    if (this.settings.toggleThumb) {\n      this.core.outer.addClass('lg-can-toggle');\n      this.core.$toolbar.append('<button type=\"button\" aria-label=\"Toggle thumbnails\" class=\"lg-toggle-thumb lg-icon\"></button>');\n      this.core.outer.find('.lg-toggle-thumb').first().on('click.lg', function () {\n        _this.core.outer.toggleClass('lg-components-open');\n      });\n    }\n  };\n\n  Thumbnail.prototype.thumbKeyPress = function () {\n    var _this = this;\n\n    this.$LG(window).on(\"keydown.lg.thumb.global\" + this.core.lgId, function (e) {\n      if (!_this.core.lgOpened || !_this.settings.toggleThumb) return;\n\n      if (e.keyCode === 38) {\n        e.preventDefault();\n\n        _this.core.outer.addClass('lg-components-open');\n      } else if (e.keyCode === 40) {\n        e.preventDefault();\n\n        _this.core.outer.removeClass('lg-components-open');\n      }\n    });\n  };\n\n  Thumbnail.prototype.destroy = function () {\n    if (this.settings.thumbnail) {\n      this.$LG(window).off(\".lg.thumb.global\" + this.core.lgId);\n      this.core.LGel.off('.lg.thumb');\n      this.core.LGel.off('.thumb');\n      this.$thumbOuter.remove();\n      this.core.outer.removeClass('lg-has-thumb');\n    }\n  };\n\n  return Thumbnail;\n}();\n\nexport default Thumbnail;","map":{"version":3,"sources":["../../../src/plugins/thumbnail/lg-thumbnail-settings.ts","../../../src/lg-events.ts","../../../src/plugins/thumbnail/lg-thumbnail.ts"],"names":[],"mappings":"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","sourcesContent":["export interface ThumbnailsSettings {\n    /**\n     * Enable thumbnails for the gallery\n     */\n    thumbnail: boolean;\n\n    /*\n     * Enable thumbnail animation.\n     */\n    animateThumb: boolean;\n\n    /**\n     * Position of selected thumbnail.\n     */\n    currentPagerPosition: 'left' | 'middle' | 'right';\n\n    /**\n     * Position of thumbnails.\n     */\n    alignThumbnails: 'left' | 'middle' | 'right';\n\n    /**\n     * Width of each thumbnails.\n     */\n    thumbWidth: number;\n\n    /**\n     * Height of each thumbnails.\n     */\n    thumbHeight: string;\n\n    /**\n     * Spacing between each thumbnails\n     */\n    thumbMargin: number;\n\n    /**\n     * control where the thumbnails should be appended.\n     * By default, thumbnails are appended to '.lg-components' which has inbuilt open close transitions\n     * If you don't want initial thumbnails transitions, or want to do more customization,\n     * you can append thumbnails to the lightGalley outer div -\n     * <a href=\"/demos/thumbnails/#static-thumbnails\">Demo</a>\n     */\n    appendThumbnailsTo: '.lg-outer' | '.lg-components';\n\n    /**\n     * Enable toggle captions and thumbnails.\n     * @description not applicable if allowMediaOverlap is false\n     */\n    toggleThumb: boolean;\n\n    /**\n     * Enables desktop mouse drag support for thumbnails.\n     */\n    enableThumbDrag: boolean;\n\n    /**\n     * Enables thumbnail touch/swipe support for touch devices\n     */\n    enableThumbSwipe: boolean;\n\n    /**\n     * By setting the thumbnailSwipeThreshold (in px) you can set how far the user must swipe for the next/prev slide.\n     */\n    thumbnailSwipeThreshold: number;\n\n    /**\n     * You can automatically load thumbnails for YouTube videos from YouTube by setting loadYouTubeThumbnail true\n     */\n    loadYouTubeThumbnail: boolean;\n\n    /**\n     * You can specify the thumbnail size by setting respective number.\n     */\n    //@todo add demo\n    youTubeThumbSize: number;\n}\n\nexport const thumbnailsSettings: ThumbnailsSettings = {\n    thumbnail: true,\n\n    animateThumb: true,\n    currentPagerPosition: 'middle',\n    alignThumbnails: 'middle',\n\n    thumbWidth: 100,\n    thumbHeight: '80px',\n    thumbMargin: 5,\n\n    appendThumbnailsTo: '.lg-components',\n    toggleThumb: false,\n\n    enableThumbDrag: true,\n    enableThumbSwipe: true,\n    thumbnailSwipeThreshold: 10,\n\n    loadYouTubeThumbnail: true,\n    youTubeThumbSize: 1,\n};\n","import { LightGallery } from './lightgallery';\nimport { VideoSource } from './plugins/video/types';\n\n/**\n * List of lightGallery events\n * All events should be documented here\n * Below interfaces are used to build the website documentations\n * */\nexport const lGEvents: {\n    [key: string]: string;\n} = {\n    afterAppendSlide: 'lgAfterAppendSlide',\n    init: 'lgInit',\n    hasVideo: 'lgHasVideo',\n    containerResize: 'lgContainerResize',\n    updateSlides: 'lgUpdateSlides',\n    afterAppendSubHtml: 'lgAfterAppendSubHtml',\n    beforeOpen: 'lgBeforeOpen',\n    afterOpen: 'lgAfterOpen',\n    slideItemLoad: 'lgSlideItemLoad',\n    beforeSlide: 'lgBeforeSlide',\n    afterSlide: 'lgAfterSlide',\n    posterClick: 'lgPosterClick',\n    dragStart: 'lgDragStart',\n    dragMove: 'lgDragMove',\n    dragEnd: 'lgDragEnd',\n    beforeNextSlide: 'lgBeforeNextSlide',\n    beforePrevSlide: 'lgBeforePrevSlide',\n    beforeClose: 'lgBeforeClose',\n    afterClose: 'lgAfterClose',\n    rotateLeft: 'lgRotateLeft',\n    rotateRight: 'lgRotateRight',\n    flipHorizontal: 'lgFlipHorizontal',\n    flipVertical: 'lgFlipVertical',\n};\n\n/**\n * Fired only once when lightGallery is initialized\n * @name lgInit\n * @method onInit\n * @example\n *   const lg = document.getElementById('custom-events-demo');\n *   // Perform any action on lightGallery initialization.\n *   // Init event returns the plugin instance that can be used to call any lightGalley public method\n *   let pluginInstance = null;\n *   lg.addEventListener('lgInit', (event) => {\n *      pluginInstance = event.detail.instance;\n *   });\n *   lightGallery(lg);\n * @see <a href=\"/docs/methods\">Methods<a>\n */\nexport interface InitDetail {\n    /**\n     * lightGallery plugin instance\n     */\n    instance: LightGallery;\n}\n\n/**\n * Fired when the slide content has been inserted into it's slide container.\n * @name lgAfterAppendSlide\n * @method onAfterAppendSlide\n */\nexport interface AfterAppendSlideEventDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n\n/**\n * Fired immediately before opening the gallery\n * @name lgBeforeOpen\n * @method onBeforeOpen\n */\nexport interface BeforeOpenDetail {}\n\n/**\n * Fired immediately after opening the gallery\n * @name lgAfterOpen\n * @method onAfterOpen\n */\nexport interface AfterOpenDetail {}\n\n/**\n * Fired once the media inside the slide has been completely loaded .\n * @name lgSlideItemLoad\n * @method onSlideItemLoad\n */\nexport interface SlideItemLoadDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * For the first slide, lightGallery adds some delay for displaying the loaded slide item.\n     * This delay is required for the transition effect when the slide item is displayed\n     * Respect the delay when you use this event\n     */\n    delay: number;\n\n    // Will be true for the first slide\n    isFirstSlide: boolean;\n}\n\n/**\n * Fired immediately before each slide transition.\n * @name lgBeforeSlide\n * @method onBeforeSlide\n * @example\n *   const lg = document.getElementById('custom-events-demo');\n *   // Perform any action before each slide transition\n *   lg.addEventListener('lgBeforeSlide', (event) => {\n *       const { index, prevIndex } = event.detail;\n *       alert(index, prevIndex);\n *   });\n *   lightGallery(lg);\n */\nexport interface BeforeSlideDetail {\n    /**\n     * Index of the previous slide\n     */\n    prevIndex: number;\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * true if slide function called via touch event or mouse drag\n     */\n    fromTouch: boolean;\n    /**\n     * true if slide function called via thumbnail click\n     */\n    fromThumb: boolean;\n}\n\n/**\n * Fired immediately after each slide transition.\n * @name lgAfterSlide\n * @method onAfterSlide\n */\nexport interface AfterSlideDetail {\n    /**\n     * Index of the previous slide\n     */\n    prevIndex: number;\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * true if slide function called via touch event or mouse drag\n     */\n    fromTouch: boolean;\n    /**\n     * true if slide function called via thumbnail click\n     */\n    fromThumb: boolean;\n}\n\n/**\n * Fired when the video poster is clicked.\n * @name lgPosterClick\n * @method onPosterClick\n */\nexport interface PosterClickDetail {}\n\n/**\n * Fired when the drag event to move to different slide starts.\n * @name lgDragStart\n * @method onDragStart\n */\nexport interface DragStartDetail {}\n\n/**\n * Fired periodically during the drag operation.\n * @name lgDragMove\n * @method onDragMove\n */\nexport interface DragMoveDetail {}\n\n/**\n * Fired when the user has finished the drag operation\n * @name lgDragEnd\n * @method onDragEnd\n */\nexport interface DragEndDetail {}\n\n/**\n * Fired immediately before the start of the close process.\n * @name lgBeforeClose\n * @method onBeforeClose\n */\nexport interface BeforeCloseDetail {}\n\n/**\n * Fired immediately once lightGallery is closed.\n * @name lgAfterClose\n * @method onAfterClose\n */\nexport interface AfterCloseDetail {\n    /**\n     * lightGallery plugin instance\n     */\n    instance: LightGallery;\n}\n\n/**\n * Fired immediately before each \"next\" slide transition\n * @name lgBeforeNextSlide\n * @method onBeforeNextSlide\n */\nexport interface BeforeNextSlideDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * true if slide function called via touch event or mouse drag\n     */\n    fromTouch: boolean;\n}\n\n/**\n * Fired immediately before each \"prev\" slide transition\n * @name lgBeforePrevSlide\n * @method onBeforePrevSlide\n */\nexport interface BeforePrevSlideDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * true if slide function called via touch event or mouse drag\n     */\n    fromTouch: boolean;\n}\n\n/**\n * Fired when the sub-html content (ex : title/ description) has been appended into the slide.\n * @name lgAfterAppendSubHtml\n * @method onAfterAppendSubHtml\n */\nexport interface AfterAppendSubHtmlDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n\n/**\n * Fired when the lightGallery container has been resized.\n * @name lgContainerResize\n * @method onContainerResize\n */\nexport interface ContainerResizeDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n\n/**\n * Fired when lightGallery detects video slide\n * @name lgHasVideo\n * @method onHasVideo\n */\nexport interface HasVideoDetail {\n    /**\n     * Index of the slide,\n     */\n    index: number;\n    /**\n     * Video source\n     */\n    src: string;\n    /**\n     * HTML5 video source if available\n     * <p>\n       HTML5 video source = source: {\n            src: string;\n            type: string;\n        }[];\n        attributes: HTMLVideoElement;\n     * </p>\n     */\n    html5Video: VideoSource;\n    /**\n     * True if video has poster\n     */\n    hasPoster: boolean;\n}\n","import {\n    ThumbnailsSettings,\n    thumbnailsSettings,\n} from './lg-thumbnail-settings';\nimport { LgQuery, lgQuery } from '../../lgQuery';\nimport { LightGallery } from '../../lightgallery';\nimport { GalleryItem } from '../../lg-utils';\nimport { lGEvents } from '../../lg-events';\ninterface ThumbDragUtils {\n    cords: {\n        startX: number;\n        endX: number;\n    };\n    isMoved: boolean;\n    newTranslateX: number;\n    startTime: Date;\n    endTime: Date;\n    touchMoveTime: number;\n}\ninterface ThumbnailGalleryItem extends GalleryItem {\n    thumb: string;\n}\nexport default class Thumbnail {\n    private core: LightGallery;\n    private $thumbOuter!: lgQuery;\n    private $lgThumb!: lgQuery;\n    private thumbOuterWidth = 0;\n    private thumbTotalWidth = 0;\n    private translateX = 0;\n    private thumbClickable = false;\n    private settings!: ThumbnailsSettings;\n    private $LG!: LgQuery;\n    constructor(instance: LightGallery, $LG: LgQuery) {\n        // get lightGallery core plugin instance\n        this.core = instance;\n        this.$LG = $LG;\n\n        return this;\n    }\n\n    init(): void {\n        // extend module default settings with lightGallery core settings\n        this.settings = {\n            ...thumbnailsSettings,\n            ...this.core.settings,\n        };\n        this.thumbOuterWidth = 0;\n        this.thumbTotalWidth =\n            this.core.galleryItems.length *\n            (this.settings.thumbWidth + this.settings.thumbMargin);\n\n        // Thumbnail animation value\n        this.translateX = 0;\n\n        this.setAnimateThumbStyles();\n\n        if (!this.core.settings.allowMediaOverlap) {\n            this.settings.toggleThumb = false;\n        }\n\n        if (this.settings.thumbnail) {\n            this.build();\n            if (this.settings.animateThumb) {\n                if (this.settings.enableThumbDrag) {\n                    this.enableThumbDrag();\n                }\n\n                if (this.settings.enableThumbSwipe) {\n                    this.enableThumbSwipe();\n                }\n\n                this.thumbClickable = false;\n            } else {\n                this.thumbClickable = true;\n            }\n\n            this.toggleThumbBar();\n            this.thumbKeyPress();\n        }\n    }\n\n    build(): void {\n        this.setThumbMarkup();\n        this.manageActiveClassOnSlideChange();\n        this.$lgThumb.first().on('click.lg touchend.lg', (e: CustomEvent) => {\n            const $target = this.$LG(e.target);\n            if (!$target.hasAttribute('data-lg-item-id')) {\n                return;\n            }\n            setTimeout(() => {\n                // In IE9 and bellow touch does not support\n                // Go to slide if browser does not support css transitions\n                if (this.thumbClickable && !this.core.lgBusy) {\n                    const index = parseInt($target.attr('data-lg-item-id'));\n                    this.core.slide(index, false, true, false);\n                }\n            }, 50);\n        });\n\n        this.core.LGel.on(`${lGEvents.beforeSlide}.thumb`, (event) => {\n            const { index } = event.detail;\n            this.animateThumb(index);\n        });\n        this.core.LGel.on(`${lGEvents.beforeOpen}.thumb`, () => {\n            this.thumbOuterWidth = this.core.outer.get().offsetWidth;\n        });\n\n        this.core.LGel.on(`${lGEvents.updateSlides}.thumb`, () => {\n            this.rebuildThumbnails();\n        });\n        this.core.LGel.on(`${lGEvents.containerResize}.thumb`, () => {\n            if (!this.core.lgOpened) return;\n            setTimeout(() => {\n                this.thumbOuterWidth = this.core.outer.get().offsetWidth;\n                this.animateThumb(this.core.index);\n                this.thumbOuterWidth = this.core.outer.get().offsetWidth;\n            }, 50);\n        });\n    }\n\n    setThumbMarkup(): void {\n        let thumbOuterClassNames = 'lg-thumb-outer ';\n\n        if (this.settings.alignThumbnails) {\n            thumbOuterClassNames += `lg-thumb-align-${this.settings.alignThumbnails}`;\n        }\n\n        const html = `<div class=\"${thumbOuterClassNames}\">\n        <div class=\"lg-thumb lg-group\">\n        </div>\n        </div>`;\n\n        this.core.outer.addClass('lg-has-thumb');\n\n        if (this.settings.appendThumbnailsTo === '.lg-components') {\n            this.core.$lgComponents.append(html);\n        } else {\n            this.core.outer.append(html);\n        }\n\n        this.$thumbOuter = this.core.outer.find('.lg-thumb-outer').first();\n        this.$lgThumb = this.core.outer.find('.lg-thumb').first();\n\n        if (this.settings.animateThumb) {\n            this.core.outer\n                .find('.lg-thumb')\n                .css('transition-duration', this.core.settings.speed + 'ms')\n                .css('width', this.thumbTotalWidth + 'px')\n                .css('position', 'relative');\n        }\n\n        this.setThumbItemHtml(\n            (this.core.galleryItems as unknown) as ThumbnailGalleryItem[],\n        );\n    }\n\n    enableThumbDrag(): void {\n        let thumbDragUtils: ThumbDragUtils = {\n            cords: {\n                startX: 0,\n                endX: 0,\n            },\n            isMoved: false,\n            newTranslateX: 0,\n            startTime: new Date(),\n            endTime: new Date(),\n            touchMoveTime: 0,\n        };\n\n        let isDragging = false;\n\n        this.$thumbOuter.addClass('lg-grab');\n\n        this.core.outer\n            .find('.lg-thumb')\n            .first()\n            .on('mousedown.lg.thumb', (e) => {\n                if (this.thumbTotalWidth > this.thumbOuterWidth) {\n                    // execute only on .lg-object\n                    e.preventDefault();\n                    thumbDragUtils.cords.startX = e.pageX;\n\n                    thumbDragUtils.startTime = new Date();\n                    this.thumbClickable = false;\n\n                    isDragging = true;\n\n                    // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\n                    this.core.outer.get().scrollLeft += 1;\n                    this.core.outer.get().scrollLeft -= 1;\n\n                    // *\n                    this.$thumbOuter\n                        .removeClass('lg-grab')\n                        .addClass('lg-grabbing');\n                }\n            });\n\n        this.$LG(window).on(\n            `mousemove.lg.thumb.global${this.core.lgId}`,\n            (e) => {\n                if (!this.core.lgOpened) return;\n                if (isDragging) {\n                    thumbDragUtils.cords.endX = e.pageX;\n\n                    thumbDragUtils = this.onThumbTouchMove(thumbDragUtils);\n                }\n            },\n        );\n\n        this.$LG(window).on(`mouseup.lg.thumb.global${this.core.lgId}`, () => {\n            if (!this.core.lgOpened) return;\n            if (thumbDragUtils.isMoved) {\n                thumbDragUtils = this.onThumbTouchEnd(thumbDragUtils);\n            } else {\n                this.thumbClickable = true;\n            }\n\n            if (isDragging) {\n                isDragging = false;\n                this.$thumbOuter.removeClass('lg-grabbing').addClass('lg-grab');\n            }\n        });\n    }\n\n    enableThumbSwipe(): void {\n        let thumbDragUtils: ThumbDragUtils = {\n            cords: {\n                startX: 0,\n                endX: 0,\n            },\n            isMoved: false,\n            newTranslateX: 0,\n            startTime: new Date(),\n            endTime: new Date(),\n            touchMoveTime: 0,\n        };\n\n        this.$lgThumb.on('touchstart.lg', (e: TouchEvent) => {\n            if (this.thumbTotalWidth > this.thumbOuterWidth) {\n                e.preventDefault();\n                thumbDragUtils.cords.startX = e.targetTouches[0].pageX;\n                this.thumbClickable = false;\n                thumbDragUtils.startTime = new Date();\n            }\n        });\n\n        this.$lgThumb.on('touchmove.lg', (e: TouchEvent) => {\n            if (this.thumbTotalWidth > this.thumbOuterWidth) {\n                e.preventDefault();\n                thumbDragUtils.cords.endX = e.targetTouches[0].pageX;\n                thumbDragUtils = this.onThumbTouchMove(thumbDragUtils);\n            }\n        });\n\n        this.$lgThumb.on('touchend.lg', () => {\n            if (thumbDragUtils.isMoved) {\n                thumbDragUtils = this.onThumbTouchEnd(thumbDragUtils);\n            } else {\n                this.thumbClickable = true;\n            }\n        });\n    }\n\n    // Rebuild thumbnails\n    rebuildThumbnails(): void {\n        // Remove transitions\n        this.$thumbOuter.addClass('lg-rebuilding-thumbnails');\n        setTimeout(() => {\n            this.thumbTotalWidth =\n                this.core.galleryItems.length *\n                (this.settings.thumbWidth + this.settings.thumbMargin);\n            this.$lgThumb.css('width', this.thumbTotalWidth + 'px');\n            this.$lgThumb.empty();\n            this.setThumbItemHtml(\n                (this.core.galleryItems as unknown) as ThumbnailGalleryItem[],\n            );\n            this.animateThumb(this.core.index);\n        }, 50);\n        setTimeout(() => {\n            this.$thumbOuter.removeClass('lg-rebuilding-thumbnails');\n        }, 200);\n    }\n\n    // @ts-check\n\n    setTranslate(value: number): void {\n        this.$lgThumb.css(\n            'transform',\n            'translate3d(-' + value + 'px, 0px, 0px)',\n        );\n    }\n\n    getPossibleTransformX(left: number): number {\n        if (left > this.thumbTotalWidth - this.thumbOuterWidth) {\n            left = this.thumbTotalWidth - this.thumbOuterWidth;\n        }\n\n        if (left < 0) {\n            left = 0;\n        }\n        return left;\n    }\n\n    animateThumb(index: number): void {\n        this.$lgThumb.css(\n            'transition-duration',\n            this.core.settings.speed + 'ms',\n        );\n        if (this.settings.animateThumb) {\n            let position = 0;\n            switch (this.settings.currentPagerPosition) {\n                case 'left':\n                    position = 0;\n                    break;\n                case 'middle':\n                    position =\n                        this.thumbOuterWidth / 2 - this.settings.thumbWidth / 2;\n                    break;\n                case 'right':\n                    position = this.thumbOuterWidth - this.settings.thumbWidth;\n            }\n            this.translateX =\n                (this.settings.thumbWidth + this.settings.thumbMargin) * index -\n                1 -\n                position;\n            if (this.translateX > this.thumbTotalWidth - this.thumbOuterWidth) {\n                this.translateX = this.thumbTotalWidth - this.thumbOuterWidth;\n            }\n\n            if (this.translateX < 0) {\n                this.translateX = 0;\n            }\n\n            this.setTranslate(this.translateX);\n        }\n    }\n\n    onThumbTouchMove(thumbDragUtils: ThumbDragUtils): ThumbDragUtils {\n        thumbDragUtils.newTranslateX = this.translateX;\n        thumbDragUtils.isMoved = true;\n\n        thumbDragUtils.touchMoveTime = new Date().valueOf();\n\n        thumbDragUtils.newTranslateX -=\n            thumbDragUtils.cords.endX - thumbDragUtils.cords.startX;\n\n        thumbDragUtils.newTranslateX = this.getPossibleTransformX(\n            thumbDragUtils.newTranslateX,\n        );\n\n        // move current slide\n        this.setTranslate(thumbDragUtils.newTranslateX);\n        this.$thumbOuter.addClass('lg-dragging');\n\n        return thumbDragUtils;\n    }\n\n    onThumbTouchEnd(thumbDragUtils: ThumbDragUtils): ThumbDragUtils {\n        thumbDragUtils.isMoved = false;\n        thumbDragUtils.endTime = new Date();\n        this.$thumbOuter.removeClass('lg-dragging');\n\n        const touchDuration =\n            thumbDragUtils.endTime.valueOf() -\n            thumbDragUtils.startTime.valueOf();\n        let distanceXnew =\n            thumbDragUtils.cords.endX - thumbDragUtils.cords.startX;\n        let speedX = Math.abs(distanceXnew) / touchDuration;\n        // Some magical numbers\n        // Can be improved\n        if (\n            speedX > 0.15 &&\n            thumbDragUtils.endTime.valueOf() - thumbDragUtils.touchMoveTime < 30\n        ) {\n            speedX += 1;\n\n            if (speedX > 2) {\n                speedX += 1;\n            }\n            speedX =\n                speedX +\n                speedX * (Math.abs(distanceXnew) / this.thumbOuterWidth);\n            this.$lgThumb.css(\n                'transition-duration',\n                Math.min(speedX - 1, 2) + 'settings',\n            );\n\n            distanceXnew = distanceXnew * speedX;\n\n            this.translateX = this.getPossibleTransformX(\n                this.translateX - distanceXnew,\n            );\n            this.setTranslate(this.translateX);\n        } else {\n            this.translateX = thumbDragUtils.newTranslateX;\n        }\n        if (\n            Math.abs(thumbDragUtils.cords.endX - thumbDragUtils.cords.startX) <\n            this.settings.thumbnailSwipeThreshold\n        ) {\n            this.thumbClickable = true;\n        }\n\n        return thumbDragUtils;\n    }\n\n    getThumbHtml(thumb: string, index: number): string {\n        const slideVideoInfo =\n            this.core.galleryItems[index].__slideVideoInfo || {};\n        let thumbImg;\n\n        if (slideVideoInfo.youtube) {\n            if (this.settings.loadYouTubeThumbnail) {\n                thumbImg =\n                    '//img.youtube.com/vi/' +\n                    slideVideoInfo.youtube[1] +\n                    '/' +\n                    this.settings.youTubeThumbSize +\n                    '.jpg';\n            } else {\n                thumbImg = thumb;\n            }\n        } else {\n            thumbImg = thumb;\n        }\n\n        return `<div data-lg-item-id=\"${index}\" class=\"lg-thumb-item ${\n            index === this.core.index ? ' active' : ''\n        }\" \n        style=\"width:${this.settings.thumbWidth}px; height: ${\n            this.settings.thumbHeight\n        };\n            margin-right: ${this.settings.thumbMargin}px;\">\n            <img data-lg-item-id=\"${index}\" src=\"${thumbImg}\" />\n        </div>`;\n    }\n\n    getThumbItemHtml(items: ThumbnailGalleryItem[]): string {\n        let thumbList = '';\n        for (let i = 0; i < items.length; i++) {\n            thumbList += this.getThumbHtml(items[i].thumb, i);\n        }\n\n        return thumbList;\n    }\n\n    setThumbItemHtml(items: ThumbnailGalleryItem[]): void {\n        const thumbList = this.getThumbItemHtml(items);\n        this.$lgThumb.html(thumbList);\n    }\n\n    setAnimateThumbStyles(): void {\n        if (this.settings.animateThumb) {\n            this.core.outer.addClass('lg-animate-thumb');\n        }\n    }\n\n    // Manage thumbnail active calss\n    manageActiveClassOnSlideChange(): void {\n        // manage active class for thumbnail\n        this.core.LGel.on(\n            `${lGEvents.beforeSlide}.thumb`,\n            (event: CustomEvent) => {\n                const $thumb = this.core.outer.find('.lg-thumb-item');\n                const { index } = event.detail;\n                $thumb.removeClass('active');\n                $thumb.eq(index).addClass('active');\n            },\n        );\n    }\n\n    // Toggle thumbnail bar\n    toggleThumbBar(): void {\n        if (this.settings.toggleThumb) {\n            this.core.outer.addClass('lg-can-toggle');\n            this.core.$toolbar.append(\n                '<button type=\"button\" aria-label=\"Toggle thumbnails\" class=\"lg-toggle-thumb lg-icon\"></button>',\n            );\n            this.core.outer\n                .find('.lg-toggle-thumb')\n                .first()\n                .on('click.lg', () => {\n                    this.core.outer.toggleClass('lg-components-open');\n                });\n        }\n    }\n\n    thumbKeyPress(): void {\n        this.$LG(window).on(`keydown.lg.thumb.global${this.core.lgId}`, (e) => {\n            if (!this.core.lgOpened || !this.settings.toggleThumb) return;\n\n            if (e.keyCode === 38) {\n                e.preventDefault();\n                this.core.outer.addClass('lg-components-open');\n            } else if (e.keyCode === 40) {\n                e.preventDefault();\n                this.core.outer.removeClass('lg-components-open');\n            }\n        });\n    }\n\n    destroy(): void {\n        if (this.settings.thumbnail) {\n            this.$LG(window).off(`.lg.thumb.global${this.core.lgId}`);\n            this.core.LGel.off('.lg.thumb');\n            this.core.LGel.off('.thumb');\n            this.$thumbOuter.remove();\n            this.core.outer.removeClass('lg-has-thumb');\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}